<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossier E5 Complet - VPN SSL pfSense | Younes B.</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dark: '#0f172a',
                        darker: '#020617',
                        card: '#1e293b',
                        pfsense: '#cb2e2e',
                        tech_blue: '#3b82f6',
                        tech_green: '#10b981',
                        tech_purple: '#8b5cf6'
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Styles Web Standard */
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3 { letter-spacing: -0.025em; }
        
        /* Animation Scroll Reveal */
        .reveal { 
            opacity: 0; 
            transform: translateY(30px); 
            transition: all 0.8s cubic-bezier(0.5, 0, 0, 1); 
        }
        .reveal.active { 
            opacity: 1; 
            transform: translateY(0); 
        }
        .delay-100 { transition-delay: 100ms; }
        .delay-200 { transition-delay: 200ms; }
        .delay-300 { transition-delay: 300ms; }

        /* Animations Spécifiques */
        .packet {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: absolute;
            z-index: 50;
            display: none;
            box-shadow: 0 0 10px currentColor;
        }

        .terminal-window {
            font-family: 'JetBrains Mono', monospace;
            background-color: #0c0c0c;
            color: #cccccc;
            border-radius: 8px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            border: 1px solid #333;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="bg-darker text-slate-300">

    <!-- NAVIGATION LATERALE -->
    <nav class="fixed left-0 top-0 h-full w-64 bg-dark border-r border-white/5 hidden xl:flex flex-col z-50 overflow-y-auto">
        <div class="p-6 border-b border-white/5">
            <div class="flex items-center gap-3 mb-1">
                <div class="w-8 h-8 bg-pfsense rounded flex items-center justify-center text-white font-bold text-sm shadow">E5</div>
                <span class="font-bold text-white">Dossier Technique</span>
            </div>
            <p class="text-xs text-slate-500">Younes Bouizergane • Session 2025</p>
        </div>
        <div class="p-4 space-y-1 text-xs font-medium text-slate-400">
            <a href="#intro" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">1. Introduction & Contexte</a>
            <a href="#project" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">2. Gestion de Projet</a>
            <a href="#analysis" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">3. Analyse & Choix</a>
            <a href="#architecture" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">4. Architecture Réseau</a>
            <a href="#implementation" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">5. Mise en Œuvre</a>
            <a href="#security" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">6. Sécurité Avancée</a>
            <a href="#client" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">7. Déploiement Client</a>
            <a href="#tests" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">8. Validation</a>
            <a href="#maintenance" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">9. Maintenance (MCO)</a>
            <a href="#userguide" class="block px-3 py-2 rounded hover:bg-white/5 hover:text-white transition">10. Support Utilisateur</a>
        </div>
    </nav>

    <!-- CONTENU PRINCIPAL -->
    <main class="xl:ml-64 p-6 max-w-5xl mx-auto">

        <!-- HEADER -->
        <header id="intro" class="py-20 border-b border-white/5 mb-12">
            <span class="text-pfsense font-mono text-sm font-bold tracking-widest">PROJET SISR • EPREUVE E5</span>
            <h1 class="text-5xl font-black text-white mt-4 mb-6 leading-tight">
                Sécurisation des Accès Distants<br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-pfsense">VPN SSL via pfSense</span>
            </h1>
            <p class="text-xl text-slate-400 leading-relaxed max-w-3xl">
                Dossier technique complet retraçant la conception, le déploiement et la sécurisation d'une infrastructure VPN pour les 30 collaborateurs nomades de TechSolutions Consulting.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-12">
                <div class="bg-card p-4 rounded border border-white/5">
                    <div class="text-slate-500 text-xs uppercase mb-1">Entreprise</div>
                    <div class="text-white font-bold">TechSolutions</div>
                </div>
                <div class="bg-card p-4 rounded border border-white/5">
                    <div class="text-slate-500 text-xs uppercase mb-1">Technologie</div>
                    <div class="text-white font-bold">OpenVPN / SSL</div>
                </div>
                <div class="bg-card p-4 rounded border border-white/5">
                    <div class="text-slate-500 text-xs uppercase mb-1">OS Serveur</div>
                    <div class="text-white font-bold">pfSense 2.7.2</div>
                </div>
                <div class="bg-card p-4 rounded border border-white/5">
                    <div class="text-slate-500 text-xs uppercase mb-1">Chiffrement</div>
                    <div class="text-white font-bold">AES-256-GCM</div>
                </div>
            </div>
        </header>

        <!-- 1. CONTEXTE -->
        <section class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-blue-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">1</span> Présentation du Contexte</h2>
            
            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><i class="fa-solid fa-building text-blue-500"></i> L'Entreprise</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    <strong>TechSolutions Consulting</strong> est une ESN (Entreprise de Services du Numérique) basée à Paris, comptant 45 collaborateurs dont 30 consultants en mission.
                </p>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    Le système d'information est centralisé au siège social (Serveurs de fichiers, Active Directory, ERP Sage). Les consultants, souvent en déplacement (hôtels, 4G, clients), ont un besoin critique d'accéder à ces ressources de manière sécurisée sans exposer le réseau aux menaces publiques.
                </p>
            </div>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2"><i class="fa-solid fa-triangle-exclamation text-red-500"></i> Diagnostic de l'Existant</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    L'audit initial a révélé des failles critiques mettant en péril la pérennité de l'activité :
                </p>
                <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                    <li><strong>Usage de TeamViewer non managé :</strong> Coûts de licence élevés et manque total de traçabilité des connexions.</li>
                    <li><strong>Ports RDP (3389) ouverts :</strong> Certains serveurs étaient exposés directement sur Internet, représentant un vecteur d'attaque privilégié pour les ransomwares.</li>
                    <li><strong>Authentification faible :</strong> Mots de passe simples utilisés pour les accès distants, sans double facteur.</li>
                </ul>
                
                <div class="mt-6 bg-red-900/10 border border-red-500/20 p-6 rounded-lg">
                    <strong class="text-red-400 text-xs uppercase tracking-widest">Problématique</strong>
                    <p class="text-white text-lg font-serif italic mt-2 leading-relaxed">"Comment garantir un accès distant performant et sécurisé aux ressources de l'entreprise pour 30 collaborateurs nomades, tout en maîtrisant les coûts et en assurant la traçabilité des accès ?"</p>
                </div>
            </div>
        </section>

        <!-- 2. GESTION DE PROJET -->
        <section id="project" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-purple-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">2</span> Gestion de Projet</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Planning Prévisionnel (Gantt)</h3>
                <div class="bg-card p-6 rounded border border-white/5 overflow-x-auto">
                    <table class="w-full text-xs text-slate-400 min-w-[500px]">
                        <thead>
                            <tr class="border-b border-slate-700">
                                <th class="text-left p-2 w-1/3">Tâche</th>
                                <th class="text-center p-2 w-1/6">Sem 1</th>
                                <th class="text-center p-2 w-1/6">Sem 2</th>
                                <th class="text-center p-2 w-1/6">Sem 3</th>
                                <th class="text-center p-2 w-1/6">Sem 4</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="p-2">1. Étude & Audit</td>
                                <td class="p-1"><div class="bg-blue-600 h-4 rounded shadow"></div></td>
                                <td></td><td></td><td></td>
                            </tr>
                            <tr>
                                <td class="p-2">2. Maquettage (PoC)</td>
                                <td></td>
                                <td class="p-1"><div class="bg-purple-600 h-4 rounded shadow"></div></td>
                                <td></td><td></td>
                            </tr>
                            <tr>
                                <td class="p-2">3. Configuration Prod</td>
                                <td></td><td></td>
                                <td class="p-1"><div class="bg-green-600 h-4 rounded shadow"></div></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td class="p-2">4. Déploiement & Doc</td>
                                <td></td><td></td><td></td>
                                <td class="p-1"><div class="bg-orange-600 h-4 rounded shadow"></div></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Analyse des Risques (Matrice)</h3>
                <table class="w-full text-sm text-left text-slate-400 border-collapse border border-slate-700">
                    <thead>
                        <tr>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Risque</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Probabilité</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Impact</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Mesure d'atténuation</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="p-3 border border-slate-700 font-bold text-white">Vol d'ordinateur portable</td>
                            <td class="p-3 border border-slate-700">Moyenne</td>
                            <td class="p-3 border border-slate-700 text-red-400">Critique</td>
                            <td class="p-3 border border-slate-700">Révocation du certificat (CRL) + Mot de passe session</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700 font-bold text-white">Brute-force sur VPN</td>
                            <td class="p-3 border border-slate-700">Élevée</td>
                            <td class="p-3 border border-slate-700 text-orange-400">Moyen</td>
                            <td class="p-3 border border-slate-700">Auth par Certificats (inattaquable par brute-force) + Fail2Ban</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 3. ANALYSE TECHNIQUE -->
        <section id="analysis" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-green-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">3</span> Analyse & Choix Techniques</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12 m-0">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Pourquoi pfSense ?</h3>
                    <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                        <li><strong>Open Source :</strong> Coût de licence nul (version CE), idéal pour le budget PME.</li>
                        <li><strong>Robustesse :</strong> Basé sur FreeBSD, réputé pour sa stabilité réseau et sécurité.</li>
                        <li><strong>Fonctionnalités :</strong> Tout-en-un (Firewall, VPN, IDS/IPS, Proxy, DNS).</li>
                    </ul>
                </div>
                <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12 m-0">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Pourquoi OpenVPN (SSL) ?</h3>
                    <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                        <li><strong>Traversée de NAT :</strong> Contrairement à IPsec/IKEv2, OpenVPN utilise un simple port UDP/TCP.</li>
                        <li><strong>Sécurité :</strong> Utilise la librairie OpenSSL, standard mondial de cryptographie.</li>
                    </ul>
                </div>
            </div>

            <div class="mt-8 bg-card p-6 rounded border border-white/5">
                <h3 class="text-white font-bold mb-4">Comparatif des Protocoles VPN</h3>
                <table class="w-full text-sm text-left text-slate-400 border-collapse border border-slate-700">
                    <thead>
                        <tr>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Critère</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">OpenVPN (Choisi)</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">IPsec / IKEv2</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">WireGuard</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="p-3 border border-slate-700">Performance</td>
                            <td class="p-3 border border-slate-700 text-orange-400">Moyenne</td>
                            <td class="p-3 border border-slate-700 text-green-400">Haute</td>
                            <td class="p-3 border border-slate-700 text-green-400">Très Haute</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700">Facilité pare-feu</td>
                            <td class="p-3 border border-slate-700 text-green-400">Excellente (Port unique)</td>
                            <td class="p-3 border border-slate-700 text-red-400">Difficile (ESP)</td>
                            <td class="p-3 border border-slate-700 text-green-400">Bonne (UDP)</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700">Maturité</td>
                            <td class="p-3 border border-slate-700 text-green-400">Très mature</td>
                            <td class="p-3 border border-slate-700 text-green-400">Très mature</td>
                            <td class="p-3 border border-slate-700 text-orange-400">Récent</td>
                        </tr>
                    </tbody>
                </table>
                <p class="text-xs text-slate-500 mt-2"><em>Conclusion : OpenVPN offre le meilleur compromis flexibilité/gestion pour une population nomade.</em></p>
            </div>
        </section>

        <!-- 4. ARCHITECTURE RÉSEAU (AVEC ANIMATION) -->
        <section id="architecture" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-orange-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">4</span> Architecture Réseau</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Plan d'Adressage IP (VLSM)</h3>
                <table class="w-full text-sm text-left text-slate-400 border-collapse border border-slate-700">
                    <thead>
                        <tr>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Zone</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Interface pfSense</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Réseau CIDR</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Plage DHCP / Usage</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="p-3 border border-slate-700 text-red-400 font-bold">WAN</td>
                            <td class="p-3 border border-slate-700">wan (em0)</td>
                            <td class="p-3 border border-slate-700">DHCP FAI</td>
                            <td class="p-3 border border-slate-700">Adresse Publique (IP Fixe)</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700 text-green-400 font-bold">LAN</td>
                            <td class="p-3 border border-slate-700">lan (em1)</td>
                            <td class="p-3 border border-slate-700">192.168.1.0/24</td>
                            <td class="p-3 border border-slate-700">.10 à .200 (Postes & Serveurs)</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700 text-blue-400 font-bold">VPN Tunnel</td>
                            <td class="p-3 border border-slate-700">ovpns1 (tun0)</td>
                            <td class="p-3 border border-slate-700">10.0.8.0/24</td>
                            <td class="p-3 border border-slate-700">.2 à .254 (Clients VPN Virtuels)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- SIMULATION INTERACTIVE PAQUET -->
            <div class="bg-card rounded-2xl border border-white/10 h-[400px] flex flex-col justify-center items-center relative mb-12 overflow-hidden shadow-2xl" id="schema-container">
                <div class="absolute top-4 right-4 z-20">
                    <button onclick="playPacketAnim()" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded text-white text-xs font-bold shadow transition-colors flex items-center gap-2">
                        <i class="fa-solid fa-play"></i> Lancer Simulation
                    </button>
                </div>
                
                <!-- Background Grid -->
                <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: radial-gradient(#ffffff 1px, transparent 1px); background-size: 20px 20px;"></div>

                <div class="flex items-center w-full px-4 md:px-16 justify-between gap-4 md:gap-0">
                    <!-- Animation Elements -->
                    <div id="vpn-packet" class="packet bg-green-400 transition-all duration-1000 ease-linear shadow-[0_0_15px_#4ade80]"></div>

                    <!-- Consultant -->
                    <div class="flex flex-col items-center relative z-10 w-32 text-center">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-slate-700 rounded-full flex items-center justify-center border-2 border-green-400 shadow-[0_0_20px_rgba(74,222,128,0.3)] mb-4">
                            <i class="fa-solid fa-laptop-code text-2xl md:text-3xl text-white"></i>
                        </div>
                        <p class="font-bold text-white text-xs md:text-sm">Consultant</p>
                        <p class="text-[10px] md:text-xs text-green-400 font-mono bg-green-400/10 px-2 py-1 rounded mt-1">10.0.8.2</p>
                    </div>

                    <!-- Tunnel Visual -->
                    <div class="flex-1 mx-2 md:mx-8 relative h-16 flex items-center">
                        <!-- Internet Line -->
                        <div class="absolute top-1/2 left-0 right-0 h-1 bg-slate-600 -z-10"></div>
                        <!-- Tunnel Tube -->
                        <div class="w-full h-8 md:h-10 border-y-2 border-dashed border-blue-500/30 bg-blue-500/5 flex items-center justify-center rounded-lg relative overflow-hidden">
                            <div class="absolute inset-0 bg-blue-500/10 animate-pulse"></div>
                            <span class="text-[8px] md:text-[10px] text-blue-400 font-mono bg-dark px-2 rounded z-10">TUNNEL SSL (UDP 1194)</span>
                        </div>
                    </div>

                    <!-- pfSense -->
                    <div class="flex flex-col items-center relative z-10 w-32 text-center mx-2 md:mx-4">
                        <div class="w-20 h-20 md:w-24 md:h-24 bg-white rounded-xl flex items-center justify-center border-4 border-pfsense shadow-[0_0_30px_rgba(203,46,46,0.4)] mb-4 relative group">
                            <i class="fa-solid fa-shield-halved text-4xl md:text-5xl text-pfsense"></i>
                            <div class="absolute -top-2 -right-2 w-4 h-4 bg-green-500 rounded-full border-2 border-white animate-pulse"></div>
                        </div>
                        <p class="font-bold text-white text-xs md:text-sm">pfSense</p>
                        <p class="text-[10px] md:text-xs text-slate-400">Firewall</p>
                    </div>

                    <!-- LAN Link -->
                    <div class="w-12 md:w-24 h-1 bg-slate-600 mx-2 md:mx-4 relative"></div>

                    <!-- Server -->
                    <div class="flex flex-col items-center relative z-10 w-32 text-center">
                        <div class="w-16 h-16 md:w-20 md:h-20 bg-slate-700 rounded-lg flex items-center justify-center border-2 border-slate-500 mb-4">
                            <i class="fa-solid fa-server text-2xl md:text-3xl text-white"></i>
                        </div>
                        <p class="font-bold text-white text-xs md:text-sm">SRV-AD</p>
                        <p class="text-[10px] md:text-xs text-slate-400 font-mono bg-slate-800 px-2 py-1 rounded mt-1">.1.100</p>
                    </div>
                </div>

                <!-- Status Text -->
                <div class="absolute bottom-6 left-0 right-0 text-center">
                    <span id="anim-status" class="text-xs md:text-sm font-mono text-blue-300 bg-black/50 px-4 py-2 rounded-full border border-white/10">Prêt pour simulation.</span>
                </div>
            </div>
        </section>

        <!-- 5. MISE EN OEUVRE (SERVEUR) -->
        <section id="implementation" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-teal-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">5</span> Mise en Œuvre Serveur</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">1. Création de la PKI (Public Key Infrastructure)</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    L'authentification repose sur des certificats X.509. pfSense intègre un gestionnaire de certificats.
                </p>
                <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                    <li><strong>Autorité de Certification (CA) :</strong> Création d'une CA interne "TechSolutions_Root_CA". (Key length: 4096 bits, Algo: SHA256).</li>
                    <li><strong>Certificat Serveur :</strong> Création d'un certificat pour le serveur VPN, signé par la CA interne. (CN: vpn.techsolutions.com).</li>
                    <li><strong>Certificats Utilisateurs :</strong> Chaque utilisateur aura son propre certificat.</li>
                </ul>
                <div class="font-mono text-xs bg-[#0d1117] text-slate-300 p-4 rounded border border-white/10 overflow-x-auto mb-4 shadow-inner" style="white-space: pre;">
# Exemple de structure d'un certificat X.509 généré
Issuer: C=FR, O=TechSolutions, CN=TechSolutions_Root_CA
Subject: C=FR, O=TechSolutions, CN=jean.dupont
Validity: Not After : Dec 31 2030
Public Key Algorithm: rsaEncryption (4096 bit)</div>
            </div>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">2. Configuration du Service OpenVPN</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    Utilisation du "Wizard" pfSense pour configurer le serveur.
                </p>
                <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                    <li><strong>Server Mode :</strong> Remote Access (SSL/TLS + User Auth). Combinaison Certificat + Login/MDP pour une double sécurité.</li>
                    <li><strong>Protocol :</strong> UDP (plus rapide pour le tunnel). Port 1194.</li>
                    <li><strong>Cryptographic Settings :</strong>
                        <ul class="pl-4 mt-1 list-[circle]">
                            <li>Encryption Algorithm : <strong>AES-256-GCM</strong> (Standard actuel, très performant avec l'accélération matérielle AES-NI).</li>
                            <li>Auth Digest : SHA256.</li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <!-- 6. SECURITE & HARDENING -->
        <section id="security" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-red-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">6</span> Sécurité Avancée (Hardening)</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12 m-0">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">MFA (Authentification Multi-Facteurs)</h3>
                    <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                        Pour contrer le vol d'identifiants, nous avons implémenté une authentification TOTP (Time-Based One-Time Password).
                    </p>
                    <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                        <li>Package : <strong>FreeRADIUS</strong> sur pfSense.</li>
                        <li>Fonctionnement : L'utilisateur entre son login + (Mot de passe AD + Code Google Authenticator) concaténés.</li>
                        <li>Résultat : Même avec le certificat et le mot de passe, un attaquant ne peut pas se connecter sans le téléphone.</li>
                    </ul>
                </div>
                <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12 m-0">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Filtrage Géographique (GeoIP)</h3>
                    <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                        Utilisation du package <strong>pfBlockerNG</strong> pour réduire la surface d'attaque.
                    </p>
                    <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                        <li>Règle : Autoriser les connexions VPN <strong>uniquement depuis la France</strong> (GeoIP FR).</li>
                        <li>Refus implicite : Toutes les IP de Chine, Russie, USA, etc. sont bloquées au niveau du pare-feu avant même d'atteindre le service OpenVPN.</li>
                    </ul>
                </div>
            </div>

            <div class="mt-8 bg-card p-6 rounded border border-white/5">
                <h3 class="text-white font-bold mb-4">Configuration TLS Auth (HMAC Firewall)</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    Une clé statique supplémentaire (tls-auth) est partagée avec tous les clients.
                </p>
                <div class="font-mono text-xs bg-[#0d1117] text-slate-300 p-4 rounded border border-white/10 overflow-x-auto mb-4 shadow-inner" style="white-space: pre;">
# OpenVPN Server Config
tls-auth /var/etc/openvpn/server1.tls-auth 0
# Cette clé permet de dropper les paquets non signés
# avant même l'étape de chiffrement SSL.
# Protection contre les attaques DoS et les scans de port.</div>
            </div>
        </section>

        <!-- 7. DÉPLOIEMENT CLIENT -->
        <section id="client" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-pink-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">7</span> Déploiement Client</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Package "Client Export"</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    pfSense dispose d'un plugin "OpenVPN Client Export" qui génère automatiquement les installateurs.
                </p>
                <ul class="list-disc list-inside text-slate-400 text-sm space-y-2 mb-4">
                    <li>Pour Windows : Génération d'un <code>.exe</code> incluant le logiciel OpenVPN Connect + le profil `.ovpn` + les certificats.</li>
                    <li>Pour macOS/Viscosity : Export d'une archive bundle.</li>
                    <li>Pour Android/iOS : Export d'un fichier `.ovpn` compatible OpenVPN Connect App.</li>
                </ul>
            </div>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Anatomie d'un fichier .ovpn</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">Voici à quoi ressemble le fichier de configuration distribué aux utilisateurs :</p>
                <div class="font-mono text-xs bg-[#0d1117] text-slate-300 p-4 rounded border border-white/10 overflow-x-auto mb-4 shadow-inner" style="white-space: pre;">
dev tun
persist-tun
persist-key
cipher AES-256-GCM
ncp-ciphers AES-256-GCM:AES-128-GCM
auth SHA256
tls-client
client
resolv-retry infinite
remote vpn.techsolutions.com 1194 udp
verify-x509-name "vpn.techsolutions.com" name
auth-user-pass
remote-cert-tls server

&lt;ca&gt;
-----BEGIN CERTIFICATE-----
MII... (Certificat de l'autorité racine pour valider le serveur)
-----END CERTIFICATE-----
&lt;/ca&gt;
&lt;cert&gt;
-----BEGIN CERTIFICATE-----
MII... (Certificat personnel de l'utilisateur)
-----END CERTIFICATE-----
&lt;/cert&gt;
&lt;key&gt;
-----BEGIN PRIVATE KEY-----
MII... (Clé privée de l'utilisateur - CRITIQUE)
-----END PRIVATE KEY-----
&lt;/key&gt;
&lt;tls-auth&gt;
-----BEGIN OpenVPN Static key V1-----
... (Clé HMAC)
-----END OpenVPN Static key V1-----
&lt;/tls-auth&gt;
key-direction 1</div>
            </div>
        </section>

        <!-- 8. VALIDATION & TESTS (AVEC TERMINAL) -->
        <section id="tests" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-yellow-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">8</span> Validation & Tests</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Plan de Test</h3>
                <table class="w-full text-sm text-left text-slate-400 border-collapse border border-slate-700 mb-8">
                    <thead>
                        <tr>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Test ID</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Action</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Résultat Attendu</th>
                            <th class="bg-slate-800 text-white p-3 border border-slate-700 font-bold">Statut</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="p-3 border border-slate-700">T01</td>
                            <td class="p-3 border border-slate-700">Connexion depuis réseau externe (4G)</td>
                            <td class="p-3 border border-slate-700">Demande user/pass, connexion établie, icône verte.</td>
                            <td class="p-3 border border-slate-700 text-green-400 font-bold">OK</td>
                        </tr>
                        <tr>
                            <td class="p-3 border border-slate-700">T02</td>
                            <td class="p-3 border border-slate-700">Ping Serveur Fichiers (192.168.1.20)</td>
                            <td class="p-3 border border-slate-700">Réponse < 50ms.</td>
                            <td class="p-3 border border-slate-700 text-green-400 font-bold">OK</td>
                        </tr>
                    </tbody>
                </table>

                <!-- TERMINAL SIMULATION -->
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Preuve de Fonctionnement (Live)</h3>
                <div class="terminal-window w-full h-[350px] p-6 overflow-hidden relative shadow-2xl">
                    <div class="absolute top-4 right-4">
                        <button onclick="startTerminal()" class="px-3 py-1 bg-slate-700 hover:bg-slate-600 border border-white/20 rounded text-white text-xs flex items-center gap-2 transition-colors">
                            <i class="fa-solid fa-rotate-right"></i> Relancer
                        </button>
                    </div>
                    <div class="flex gap-2 mb-4 opacity-50">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                    </div>
                    <div id="terminal-content" class="font-mono text-sm leading-relaxed text-slate-300">
                        <span class="text-slate-500">Microsoft Windows [version 10.0.19045.3570]</span><br>
                        <span class="text-slate-500">(c) Microsoft Corporation. Tous droits réservés.</span><br><br>
                        C:\Users\j.doe> _
                    </div>
                </div>
            </div>
        </section>

        <!-- 9. MAINTENANCE (MCO) -->
        <section id="maintenance" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-slate-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">9</span> Maintien en Condition Opérationnelle</h2>

            <div class="border-l-2 border-slate-700 pl-6 ml-4 mb-12">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">Sauvegardes Automatisées</h3>
                <p class="text-slate-400 text-sm leading-relaxed mb-4 text-justify">
                    Un script shell a été mis en place sur un serveur de management pour récupérer la configuration XML de pfSense toutes les nuits via SSH/SCP.
                </p>
                <div class="font-mono text-xs bg-[#0d1117] text-slate-300 p-4 rounded border border-white/10 overflow-x-auto mb-4 shadow-inner" style="white-space: pre;">
#!/bin/bash
# Script de backup config pfSense
DATE=$(date +%Y%m%d)
PFSENSE_IP="192.168.1.1"
USER="admin"
DEST="/backups/pfsense/"

scp $USER@$PFSENSE_IP:/conf/config.xml $DEST/config-$DATE.xml

# Rétention de 30 jours
find $DEST -name "config-*.xml" -mtime +30 -delete</div>
            </div>
        </section>

        <!-- 10. SUPPORT UTILISATEUR -->
        <section id="userguide" class="reveal mb-20">
            <h2 class="text-3xl font-bold text-white mb-8 flex items-center"><span class="bg-indigo-600 w-8 h-8 rounded flex items-center justify-center text-sm mr-3 shadow">10</span> Support Utilisateur (FAQ)</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-card p-6 rounded border border-white/5">
                    <h4 class="font-bold text-white mb-2">Erreur : "TLS Error: TLS handshake failed"</h4>
                    <p class="text-sm text-slate-400">
                        <strong>Cause :</strong> Le serveur ne répond pas.<br>
                        <strong>Solution :</strong> Vérifiez votre connexion internet. Vérifiez que vous n'êtes pas sur un réseau public bloquant le VPN (essayez le partage de connexion 4G).
                    </p>
                </div>
                <div class="bg-card p-6 rounded border border-white/5">
                    <h4 class="font-bold text-white mb-2">Erreur : "Auth Failed"</h4>
                    <p class="text-sm text-slate-400">
                        <strong>Cause :</strong> Mauvais mot de passe ou certificat révoqué.<br>
                        <strong>Solution :</strong> Vérifiez vos identifiants Windows/AD. Si le problème persiste, contactez le support IT pour vérifier l'état de votre certificat.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <!-- JAVASCRIPT (Scroll Reveal + Animations) -->
    <script>
        // SCROLL REVEAL
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    // Ajoute la classe active si visible, la garde ensuite
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // On peut arrêter d'observer une fois apparu pour éviter les clignotements
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            // On ajoute la classe reveal-hidden uniquement si JS fonctionne
            document.querySelectorAll('.reveal').forEach(el => {
                el.classList.add('reveal-hidden');
                observer.observe(el);
            });
        });

        // --- ANIMATION PACKET ---
        function playPacketAnim() {
            const packet = document.getElementById('vpn-packet');
            const status = document.getElementById('anim-status');
            
            if(!packet) return;

            // Reset
            packet.style.transition = 'none';
            packet.style.display = 'block';
            // Laptop position
            packet.style.left = '15%'; 
            packet.style.top = '50%';
            packet.style.transform = 'translateY(-50%)';
            packet.style.backgroundColor = '#4ade80'; // Green (Data)

            if(status) status.innerText = "Consultant: Envoi données...";

            // Start Animation
            setTimeout(() => {
                packet.style.transition = 'all 2s linear';
                packet.style.left = '40%'; // Into Tunnel
                if(status) status.innerText = "Client VPN: Encapsulation & Chiffrement (AES-256)...";
                packet.style.backgroundColor = '#3b82f6'; // Blue (Encrypted)
            }, 100);

            setTimeout(() => {
                packet.style.left = '60%'; // pfSense Area
                if(status) status.innerText = "pfSense: Déchiffrement & Vérification...";
            }, 1500);

            setTimeout(() => {
                packet.style.left = '85%'; // Server
                packet.style.backgroundColor = '#4ade80'; // Green (Decrypted)
                if(status) status.innerText = "LAN: Données livrées au Serveur.";
            }, 2500);

            setTimeout(() => {
                packet.style.display = 'none';
                if(status) status.innerText = "Transmission terminée.";
            }, 3500);
        }

        // --- ANIMATION TERMINAL ---
        const terminalLines = [
            "C:\\Users\\j.doe> ipconfig /all",
            "Carte Ethernet OpenVPN TAP-Windows6:",
            "   Adresse IPv4. . . . . . . . . . . : 10.0.8.2",
            "   Masque de sous-réseau . . . . . . : 255.255.255.0",
            "",
            "C:\\Users\\j.doe> ping 192.168.1.100",
            "Envoi d'une requête 'Ping' 192.168.1.100 avec 32 octets de données :",
            "Réponse de 192.168.1.100 : octets=32 temps=24 ms TTL=127",
            "Réponse de 192.168.1.100 : octets=32 temps=21 ms TTL=127",
            "Réponse de 192.168.1.100 : octets=32 temps=28 ms TTL=127",
            "",
            "Statistiques Ping pour 192.168.1.100:",
            "    Paquets : envoyés = 3, reçus = 3, perdus = 0 (perte 0%),"
        ];

        function startTerminal() {
            const contentDiv = document.getElementById('terminal-content');
            contentDiv.innerHTML = '<span class="text-slate-500">Microsoft Windows [version 10.0.19045.3570]</span><br><span class="text-slate-500">(c) Microsoft Corporation. Tous droits réservés.</span><br><br>';
            
            let lineIndex = 0;

            function typeLine() {
                if (lineIndex < terminalLines.length) {
                    const line = terminalLines[lineIndex];
                    const p = document.createElement('div');
                    p.style.minHeight = '1.5em';
                    
                    if (line.includes("C:\\")) p.style.color = "#fff";
                    else if (line.includes("Réponse")) p.style.color = "#4ade80";
                    else if (line.includes("Statistiques")) p.style.color = "#fbbf24";
                    else p.style.color = "#94a3b8";
                    
                    contentDiv.appendChild(p);

                    if (line.includes("C:\\")) {
                        let charIndex = 0;
                        p.textContent = "C:\\Users\\j.doe> "; 
                        const cmd = line.replace("C:\\Users\\j.doe> ", "");
                        const interval = setInterval(() => {
                            p.textContent += cmd[charIndex];
                            charIndex++;
                            if (charIndex >= cmd.length) {
                                clearInterval(interval);
                                lineIndex++;
                                setTimeout(typeLine, 400);
                            }
                        }, 50);
                    } else {
                        p.textContent = line;
                        lineIndex++;
                        setTimeout(typeLine, 150);
                    }
                    
                    // Auto scroll
                    const win = document.querySelector('.terminal-window');
                    win.scrollTop = win.scrollHeight;
                }
            }
            typeLine();
        }
    </script>
</body>
</html>